<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" href="./assets/styles.css">
  <title>Aligning Constraint Generation with Design Intent in Parametric CAD</title>
  <meta name="description" content="Aligning Constraint Generation with Design Intent in Parametric CAD">
  
  <meta property="og:title" content="Aligning Constraint Generation with Design Intent in Parametric CAD">
  <script type="text/javascript">
    google.load("jquery", "1.3.2");
  </script>
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async
          src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
  </script>
  <style type="text/css">
    html {
      scroll-behavior: smooth;
    }
    body {
      font-family: "HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif;
      font-weight: 300;
      font-size: 18px;
      margin-left: auto;
      margin-right: auto;
      width: 1100px;
    }

    h1 {
      font-weight: 300;
    }

    .disclaimerbox {
      background-color: #eee;
      border: 1px solid #eeeeee;
      border-radius: 10px;
      -moz-border-radius: 10px;
      -webkit-border-radius: 10px;
      padding: 20px;
    }

    video.header-vid {
      height: 140px;
      border: 1px solid black;
      border-radius: 10px;
      -moz-border-radius: 10px;
      -webkit-border-radius: 10px;
    }

    img.header-img {
      height: 140px;
      border: 1px solid black;
      border-radius: 10px;
      -moz-border-radius: 10px;
      -webkit-border-radius: 10px;
    }

    img.rounded {
      border: 0px solid #eeeeee;
      border-radius: 10px;
      -moz-border-radius: 10px;
      -webkit-border-radius: 10px;
      margin-top: -35px;
    }

    a:link,
    a:visited {
      color: #1367a7;
      text-decoration: none;
    }

    a:hover {
      color: #208799;
    }

    td.dl-link {
      height: 160px;
      text-align: center;
      font-size: 22px;
    }

    .layered-paper-big {
      /* modified from: http://css-tricks.com/snippets/css/layered-paper/ */
      box-shadow:
        0px 0px 1px 1px rgba(0, 0, 0, 0.35),
        /* The top layer shadow */
        5px 5px 0 0px #fff,
        /* The second layer */
        5px 5px 1px 1px rgba(0, 0, 0, 0.35),
        /* The second layer shadow */
        10px 10px 0 0px #fff,
        /* The third layer */
        10px 10px 1px 1px rgba(0, 0, 0, 0.35),
        /* The third layer shadow */
        15px 15px 0 0px #fff,
        /* The fourth layer */
        15px 15px 1px 1px rgba(0, 0, 0, 0.35),
        /* The fourth layer shadow */
        20px 20px 0 0px #fff,
        /* The fifth layer */
        20px 20px 1px 1px rgba(0, 0, 0, 0.35),
        /* The fifth layer shadow */
        25px 25px 0 0px #fff,
        /* The fifth layer */
        25px 25px 1px 1px rgba(0, 0, 0, 0.35);
      /* The fifth layer shadow */
      margin-left: 10px;
      margin-right: 45px;
    }

    .paper-big {
      /* modified from: http://css-tricks.com/snippets/css/layered-paper/ */
      box-shadow:
        0px 0px 1px 1px rgba(0, 0, 0, 0.35);
      /* The top layer shadow */
      margin-left: 10px;
      margin-right: 45px;
    }

    .layered-paper {
      /* modified from: http://css-tricks.com/snippets/css/layered-paper/ */
      box-shadow:
        0px 0px 1px 1px rgba(0, 0, 0, 0.35),
        /* The top layer shadow */
        5px 5px 0 0px #fff,
        /* The second layer */
        5px 5px 1px 1px rgba(0, 0, 0, 0.35),
        /* The second layer shadow */
        10px 10px 0 0px #fff,
        /* The third layer */
        10px 10px 1px 1px rgba(0, 0, 0, 0.35);
      /* The third layer shadow */
      margin-top: 5px;
      margin-left: 10px;
      margin-right: 30px;
      margin-bottom: 5px;
    }

    .vert-cent {
      position: relative;
      top: 50%;
      transform: translateY(-50%);
    }

    hr {
      border: 0;
      height: 1px;
      background-image: linear-gradient(to right, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.75), rgba(0, 0, 0, 0));
    }

    .logo {
        padding-right: 5px
    }

    .description{
        display: block;
        margin-block-start: 1.33em;
        margin-block-end: 1.33em;
        margin-inline-start: 0px;
        margin-inline-end: 0px;
    }

    .journal{
        display: block;
        font-size: 1.17em;
        margin-block-start: 1em;
        margin-block-end: 1em;
        margin-inline-start: 0px;
        margin-inline-end: 0px;
    }

    .swipe-word{
        display: block;
        font-size: 1.5em;
        margin-block-start: 0.2em;
        margin-block-end: 0.2em;
        margin-inline-start: 0px;
        margin-inline-end: 0px;
        font-weight: bold;
    }

    .section {
        padding: 20px;
        margin: 20px 0;
    }

    .container.is-max-desktop {
        max-width: 960px;
        margin: 0 auto;
    }

    .content {
        font-size: 16px;
        line-height: 1.5;
    }

    .title {
        font-size: 24px;
        font-weight: bold;
        margin-bottom: 10px;
    }

    pre code {
        display: block;
        padding: 10px;
        background-color: #f5f5f5;
        border: 1px solid #ddd;
        border-radius: 5px;
        overflow-x: auto;
    }

    /* Gallery Viewer Styles */
    .gallery-section {
        margin: 20px 0;
        padding: 10px 0;
    }
    
    .difficulty-section {
        margin-bottom: 40px;
        padding: 20px;
    }
    
    .difficulty-title {
        font-size: 24px;
        font-weight: 300;
        margin-bottom: 15px;
        padding: 10px;
        text-align: center;
        border-radius: 5px;
    }
    
    .easy-title { background-color: #d4edda; color: #155724; }
    .medium-title { background-color: #fff3cd; color: #856404; }
    .hard-title { background-color: #f8d7da; color: #721c24; }
    
    .filter-controls {
        display: flex;
        justify-content: center;
        gap: 10px;
        margin: 20px 0;
        flex-wrap: wrap;
    }
    
    .filter-btn {
        background: #f8f9fa;
        color: #495057;
        border: 1px solid #dee2e6;
        padding: 10px 20px;
        border-radius: 5px;
        font-weight: 300;
        cursor: pointer;
        transition: all 0.2s;
    }
    
    .filter-btn:hover {
        background: #e9ecef;
        border-color: #adb5bd;
    }
    
    .filter-btn.active {
        background: #007bff;
        color: white;
        border-color: #007bff;
    }
    
    .unified-gallery {
        margin: 20px 0;
    }
    
    .pagination-controls {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 20px;
        margin: 20px 0;
        flex-wrap: wrap;
    }
    
    .pagination-btn {
        background: #007bff;
        color: white;
        border: none;
        padding: 10px 15px;
        border-radius: 5px;
        font-weight: 300;
        cursor: pointer;
        transition: background-color 0.2s;
    }
    
    .pagination-btn:hover:not(:disabled) {
        background: #0056b3;
    }
    
    .pagination-btn:disabled {
        background: #ccc;
        cursor: not-allowed;
    }
    
    .page-info {
        font-weight: 300;
        color: #666;
    }
    
    .gallery {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        padding: 20px 0;
    }
    
    .image-card {
        border-radius: 8px;
        overflow: hidden;
        transition: transform 0.2s;
    }
    
    .image-card:hover {
        transform: translateY(-5px);
    }
    
    .image-card img {
        width: 100%;
        height: auto;
        display: block;
        cursor: pointer;
        transition: transform 0.2s;
        border-radius: 8px;
    }
    
    .image-card img:hover {
        transform: scale(1.02);
    }
    

    
    /* Lightbox styles */
    .lightbox {
        display: none;
        position: fixed;
        z-index: 1000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.9);
        cursor: pointer;
    }
    
    .lightbox.show {
        display: flex;
        justify-content: center;
        align-items: center;
    }
    
    .lightbox-content {
        max-width: 95%;
        max-height: 95%;
        object-fit: contain;
        border-radius: 8px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
    }
    
    .lightbox-close {
        position: absolute;
        top: 20px;
        right: 30px;
        color: white;
        font-size: 40px;
        font-weight: bold;
        cursor: pointer;
        user-select: none;
        transition: color 0.3s;
    }
    
    .lightbox-close:hover {
        color: #ccc;
    }
    
    .lightbox-info {
        position: absolute;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        color: white;
        background: rgba(0, 0, 0, 0.7);
        padding: 10px 20px;
        border-radius: 5px;
        font-size: 16px;
        text-align: center;
    }


  </style>
</head>

<body data-gr-c-s-loaded="true" cz-shortcut-listen="true">
  <!-- Lightbox overlay -->
  <div id="lightbox" class="lightbox" onclick="closeLightbox()">
    <span class="lightbox-close" onclick="closeLightbox()">&times;</span>
    <img id="lightbox-image" class="lightbox-content" onclick="event.stopPropagation()">
    <div id="lightbox-info" class="lightbox-info"></div>
  </div>

  <br>
      <center>
      <span style="font-size:34px">Aligning Constraint Generation with Design Intent in Parametric CAD</span><br>
      <br>
      <b><span style="font-size:22px">ICCV 2025</span></b>
      <br><br>
    <table align="center" width="1200px">
      <tbody>
        <tr>
          <td align="center" width="400px">
            <center>
              <span style="font-size:22px"><a>Evan Casey</a></span>
            </center>
          </td>
          <td align="center" width="400px">
            <center>
              <span style="font-size:22px"><a>Tianyu Zhang</a></span>
            </center>
          </td>
          <td align="center" width="400px">
            <center>
              <span style="font-size:22px"><a>Shu Ishida</a></span>
            </center>
          </td>
          <td align="center" width="400px">
            <center>
              <span style="font-size:22px"><a>William P. McCarthy</a></span>
            </center>
          </td>
        </tr>
        <tr>
          <td align="center" width="100px">
            <center>
              <span style="font-size:22px"><a>Amir Khasahmadi</a></span>
            </center>
          </td>
          <td align="center" width="100px">
            <center>
              <span style="font-size:22px"><a>Joseph George Lambourne</a></span>
            </center>
          </td>
          <td align="center" width="100px">
            <center>
              <span style="font-size:22px"><a>Pradeep Kumar Jayaraman</a></span>
            </center>
          </td>
          <td align="center" width="100px">
            <center>
              <span style="font-size:22px"><a>Karl D.D. Willis</a></span>
            </center>
          </td>
        </tr>
      </tbody>
    </table>
    <br> <!-- Added vertical space -->
    <table align="center" width="300px">
      <tbody>
        <tr>
          <td align="center" width="300px">
            Autodesk Research
            <center>
              <img class="img-fluid d-block logo" height="20px" src="./assets/autodesk_logo.jpeg">
              <b style="font-size: 24px;">
                <a href="https://arxiv.org/abs/2504.13178">[arxiv]</a>
              </b>
            </center>
          </td>
        </tr>
      </tbody>
    </table>

    <br>
    <br>
    <br>

    <center>
        <img class="rounded" src="./assets/teaser-hd.png" style="max-width: 800px; height: auto; width: auto;">
        <br>
        <span class="description" align="center" style="max-width: 850px; height: auto; width: auto;">
        We post-train constraint generation models using solver feedback with the goal of aligning them to remove all degrees of freedom (fully-constrained) while avoiding geometric distortion, over-constraining, and solve failures -- a key first step towards practical auto-constraining tools that preserve design intent.
        </span>
        <br>
    </center>
    
    <hr>

    <table align="center" width="800px">
      <tbody>
        <tr>
          <td align="center">
            <center>
              <h1>Abstract</h1>
              We introduce alignment techniques from reasoning large language models (LLMs) to the task of generating engineering sketch constraints in computer-aided design (CAD) models. Engineering sketches are composed of geometric primitives (such as points and lines) connected by constraints (such as perpendicularity and tangency) that define their relationships. For a design to remain easily editable, these constraints must accurately capture design intent, ensuring that geometry updates predictably as parameters change. While current methods can generate CAD designs, aligning model outputs with design intent—what we call "design alignment"—remains an open challenge. A crucial first step is to generate constraints that fully constrain all geometric primitives without over-constraining or distorting the sketch geometry. By training an existing constraint generation model with alignment techniques and feedback from a constraint solver, we achieve a 93% rate of fully-constrained sketches, compared to 34% using a naïve supervised fine-tuning (SFT) baseline and only 8.9% without SFT. Our approach is model-agnostic and paves the way for further research bridging alignment strategies between language and design domains.
            </center>
            <br>
          </td>
        </tr>
      </tbody>
    </table>

    <hr>

    <table align="center" width="800px">
      <tbody>
        <tr>
          <td align="center">
                          <center>
                <h1>Background</h1>
                <br>
                <img class="rounded" src="./assets/design_intent_background.png" style="max-width: 700px; height: auto; width: auto;">
                <br><br>
                <span class="description" align="center">
                Parametric CAD sketches require constraints that capture design intent. Traditional approaches focus on geometric correctness, but our work emphasizes aligning generated constraints with what designers actually intend, ensuring sketches remain editable and predictable as parameters change.
                </span>
              </center>
            </td>
          </tr>
        </tbody>
      </table>

    <hr>

    <table align="center" width="800px">
      <tbody>
        <tr>
          <td align="center">
            <center>
              <h1>Method</h1>
              <br>
              <img class="rounded" src="./assets/method_workflow.png" style="max-width: 700px; height: auto; width: auto;">
              <br><br>
              <span class="description" align="center">
              We introduce a novel framework that adapts alignment techniques from large language models to parametric CAD constraint generation. Our method employs iterative training with constraint solver feedback, combining supervised fine-tuning (SFT) with reinforcement learning from human feedback (RLHF) techniques including Direct Preference Optimization (DPO), Expert Iteration (ExIT), and Reinforce Leave-One-Out (RLOO). 
              </span>
            </center>
          </td>
        </tr>
      </tbody>
    </table>

  <hr>

      <!-- Results Gallery Section -->
    <div class="gallery-section">
      <center>
        <h1>Results Gallery</h1>
        <span class="description" align="center" style="max-width: 1000px; height: auto; width: auto;">
        Explore detailed comparisons between different alignment methods across varying difficulty levels. Click on an image to view the full comparison.
        </span>
        
        <!-- Filter buttons -->
        <div class="filter-controls">
          <button class="filter-btn active" onclick="setFilter('easy')">Easy</button>
          <button class="filter-btn" onclick="setFilter('medium')">Medium</button>
          <button class="filter-btn" onclick="setFilter('hard')">Hard</button>
        </div>
        
        <!-- Single unified gallery -->
        <div class="unified-gallery">
          <div class="gallery" id="main-gallery-grid">
            <!-- Images will be loaded dynamically -->
          </div>
          <div class="pagination-controls">
            <button class="pagination-btn" onclick="changePage(-1)">← Previous</button>
            <span class="page-info" id="main-page-info">Page 1</span>
            <button class="pagination-btn" onclick="changePage(1)">Next →</button>
          </div>
        </div>
      </center>
  </div>

  <hr>

    <h1>BibTeX</h1>
  <section class="section" id="BibTeX" style="text-align: left;">
    <div class="container is-max-desktop content" style="text-align: left;">
      <pre style="text-align: left;"><code>@inproceedings{casey2024aligningconstraintgeneration,
  title={Aligning Constraint Generation with Design Intent in Parametric CAD}, 
  author={Evan Casey and Tianyu Zhang and Shu Ishida and William P. McCarthy and Amir Khasahmadi and Joseph George Lambourne and Pradeep Kumar Jayaraman and Karl D.D. Willis},
  booktitle={ICCV},
  year={2025},
}</code></pre>
    </div>
  </section>
  <div class="py-5">
    <div class="container">
      <div class="row">
        <div class="col-md-12"></div>
      </div>
    </div>
  </div>
  
  <div class="py-5">
    <div class="container">
      <div class="row">
        <div class="col-md-12"></div>
      </div>
    </div>
  </div>
  
  <hr>
  
  <div class="py-5">
    <div class="container">
      <div class="row">
        <div class="col-md-12"></div>
      </div>
    </div>
  </div>

  <script>
    // Gallery state
    let currentFilter = 'easy';
    
    const galleryState = {
      easy: { currentPage: 1, totalPages: 42, totalImages: 498 },
      medium: { currentPage: 1, totalPages: 41, totalImages: 490 },
      hard: { currentPage: 1, totalPages: 40, totalImages: 471 }
    };
    
    const imagesPerPage = 12;
    
    function generateImagePath(difficulty, index) {
      const paddedIndex = String(index).padStart(3, '0');
      return `model_comparisons_all_difficulties/${difficulty}/comparison_${difficulty}_${difficulty}_idx_0_0_${paddedIndex}_000.png`;
    }
    
    function setFilter(difficulty) {
      currentFilter = difficulty;
      
      // Update filter button states
      document.querySelectorAll('.filter-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      event.target.classList.add('active');
      
      // Load the first page of the selected difficulty
      galleryState[difficulty].currentPage = 1;
      loadGalleryPage();
    }
    
    function loadGalleryPage() {
      const gallery = document.getElementById('main-gallery-grid');
      const state = galleryState[currentFilter];
      const startIndex = (state.currentPage - 1) * imagesPerPage;
      
      // Clear existing images
      gallery.innerHTML = '';
      
      // Calculate how many images to load
      const remainingImages = state.totalImages - startIndex;
      const imagesToLoad = Math.min(imagesPerPage, remainingImages);
      
      // Load images for this page
      for (let i = 0; i < imagesToLoad; i++) {
        const imageIndex = startIndex + i;
        const imageCard = document.createElement('div');
        imageCard.className = 'image-card';
        
        const img = document.createElement('img');
        img.src = generateImagePath(currentFilter, imageIndex);
        img.alt = `${currentFilter} comparison ${imageIndex}`;
        img.loading = 'lazy';
        
        // Add error handling for missing images
        img.onerror = function() {
          this.style.display = 'none';
        };
        
        // Add click handler for lightbox
        img.addEventListener('click', function() {
          openLightbox(img, `${currentFilter.charAt(0).toUpperCase() + currentFilter.slice(1)} Difficulty`);
        });
        
        imageCard.appendChild(img);
        gallery.appendChild(imageCard);
      }
      
      // Update pagination controls
      updatePaginationControls();
    }
    
    function updatePaginationControls() {
      const state = galleryState[currentFilter];
      const pageInfo = document.getElementById('main-page-info');
      const prevBtn = document.querySelector('.pagination-controls button:first-child');
      const nextBtn = document.querySelector('.pagination-controls button:last-child');
      
      pageInfo.textContent = `Page ${state.currentPage} of ${state.totalPages}`;
      
      // Enable/disable buttons
      prevBtn.disabled = state.currentPage === 1;
      nextBtn.disabled = state.currentPage === state.totalPages;
    }
    
    function changePage(direction) {
      const state = galleryState[currentFilter];
      const newPage = state.currentPage + direction;
      
      if (newPage >= 1 && newPage <= state.totalPages) {
        state.currentPage = newPage;
        loadGalleryPage();
      }
    }
    
    function openLightbox(img, difficulty) {
      const lightbox = document.getElementById('lightbox');
      const lightboxImage = document.getElementById('lightbox-image');
      const lightboxInfo = document.getElementById('lightbox-info');
      
      lightboxImage.src = img.src;
      lightboxImage.alt = img.alt;
      lightboxInfo.textContent = difficulty;
      
      lightbox.classList.add('show');
      document.body.style.overflow = 'hidden';
    }
    
    function closeLightbox() {
      const lightbox = document.getElementById('lightbox');
      lightbox.classList.remove('show');
      document.body.style.overflow = 'auto';
    }
    
    // Close lightbox with Escape key
    document.addEventListener('keydown', function(event) {
      if (event.key === 'Escape') {
        closeLightbox();
      }
    });
    
    // Initialize gallery when page loads
    document.addEventListener('DOMContentLoaded', function() {
      loadGalleryPage();
    });
  </script>
</body>
</html>